{"remainingRequest":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\thread-loader\\dist\\cjs.js!E:\\WebStormProject\\blog-vue-typescript\\node_modules\\babel-loader\\lib\\index.js!E:\\WebStormProject\\blog-vue-typescript\\node_modules\\ts-loader\\index.js??ref--13-3!E:\\WebStormProject\\blog-vue-typescript\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\WebStormProject\\blog-vue-typescript\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\WebStormProject\\blog-vue-typescript\\src\\components\\registerAndLogin.vue?vue&type=script&lang=ts&","dependencies":[{"path":"E:\\WebStormProject\\blog-vue-typescript\\src\\components\\registerAndLogin.vue","mtime":1573558720910},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\ts-loader\\index.js","mtime":1545640398000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.regexp.constructor\";\nimport _JSON$stringify from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/json/stringify\";\nimport \"core-js/modules/es6.function.name\";\nimport _classCallCheck from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/inherits\";\nimport * as tslib_1 from \"tslib\";\nimport { Component, Emit, Prop, Vue } from \"vue-property-decorator\";\nimport config from \"@/utils/config\";\n\nvar RegisterAndLogin =\n/*#__PURE__*/\nfunction (_Vue) {\n  _inherits(RegisterAndLogin, _Vue);\n\n  function RegisterAndLogin() {\n    var _this;\n\n    _classCallCheck(this, RegisterAndLogin);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RegisterAndLogin).apply(this, arguments)); // initial data\n\n    _this.btnLoading = false;\n    _this.loading = false;\n    _this.formLabelWidth = _this.isMobile ? \"40px\" : \"60px\";\n    _this.params = {\n      email: \"\",\n      name: \"\",\n      password: \"\",\n      phone: \"\",\n      desc: \"\"\n    };\n    return _this;\n  } // lifecycle hook\n\n\n  _createClass(RegisterAndLogin, [{\n    key: \"mounted\",\n    value: function mounted() {} // computed\n\n  }, {\n    key: \"handleOAuth\",\n    // method\n    value: function handleOAuth() {\n      // 保存授权前的页面链接内容\n      var preventHistory = {\n        name: this.$route.name,\n        query: this.$route.query\n      };\n      window.sessionStorage.preventHistory = _JSON$stringify(preventHistory); // window.location.href = 'https://github.com/login/oauth/authorize?client_id=6de90ab270aea2bdb01c&redirect_uri=http://biaochenxuying.cn/login'\n\n      window.location.href = \"\".concat(config.oauth_uri, \"?client_id=\").concat(config.client_id, \"&redirect_uri=\").concat(config.redirect_uri);\n    }\n  }, {\n    key: \"handleOk\",\n    value: function handleOk() {\n      var reg = new RegExp(\"^[a-z0-9]+([._\\\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$\"); //正则表达式\n\n      if (!this.params.email) {\n        // Message.warning(\"邮箱不能为空！\");\n        this.$message({\n          message: \"邮箱不能为空！\",\n          type: \"warning\"\n        });\n        return;\n      } else if (!reg.test(this.params.email)) {\n        this.$message({\n          message: \"请输入格式正确的邮箱！\",\n          type: \"warning\"\n        });\n        return;\n      }\n\n      if (this.handleFlag === \"register\") {\n        if (!this.params.password) {\n          this.$message({\n            message: \"密码不能为空！\",\n            type: \"warning\"\n          });\n          return;\n        } else if (!this.params.name) {\n          this.$message({\n            message: \"用户名不能为空！\",\n            type: \"warning\"\n          });\n          return;\n        }\n\n        var re = /^(((13[0-9]{1})|(15[0-9]{1})|(17[0-9]{1})|(18[0-9]{1}))+\\d{8})$/;\n\n        if (this.params.phone && !re.test(this.params.phone)) {\n          this.$message({\n            message: \"请输入正确的手机号!\",\n            type: \"warning\"\n          });\n          return;\n        }\n      }\n\n      this.submit();\n    } // this.$emit\n\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      return false;\n    }\n  }, {\n    key: \"submit\",\n    value: function () {\n      var _submit = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var data, userInfo;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                data = \"\";\n                this.btnLoading = true;\n\n                if (!(this.handleFlag === \"register\")) {\n                  _context.next = 8;\n                  break;\n                }\n\n                _context.next = 5;\n                return this.$https.post(this.$urls.register, this.params);\n\n              case 5:\n                data = _context.sent;\n                _context.next = 11;\n                break;\n\n              case 8:\n                _context.next = 10;\n                return this.$https.post(this.$urls.login, this.params);\n\n              case 10:\n                data = _context.sent;\n\n              case 11:\n                this.btnLoading = false;\n                userInfo = {\n                  _id: data._id,\n                  name: data.name,\n                  avatar: data.avatar\n                };\n                this.$store.commit(\"SAVE_USER\", {\n                  userInfo: userInfo\n                });\n                window.sessionStorage.userInfo = _JSON$stringify(userInfo);\n                this.$message({\n                  message: \"操作成功\",\n                  type: \"success\"\n                });\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function submit() {\n        return _submit.apply(this, arguments);\n      }\n\n      return submit;\n    }()\n  }, {\n    key: \"dialogVisible\",\n    get: function get() {\n      return this.visible;\n    }\n  }]);\n\n  return RegisterAndLogin;\n}(Vue);\n\ntslib_1.__decorate([Prop({\n  default: false\n})], RegisterAndLogin.prototype, \"visible\", void 0);\n\ntslib_1.__decorate([Prop({\n  default: false\n})], RegisterAndLogin.prototype, \"handleFlag\", void 0);\n\ntslib_1.__decorate([Prop({\n  default: false\n})], RegisterAndLogin.prototype, \"isMobile\", void 0);\n\ntslib_1.__decorate([Emit()], RegisterAndLogin.prototype, \"cancel\", null);\n\ntslib_1.__decorate([Emit(\"ok\")], RegisterAndLogin.prototype, \"submit\", null);\n\nRegisterAndLogin = tslib_1.__decorate([Component({// components: {}\n})], RegisterAndLogin);\nexport default RegisterAndLogin;",null]}