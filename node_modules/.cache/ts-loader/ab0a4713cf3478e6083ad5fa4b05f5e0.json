{"remainingRequest":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\babel-loader\\lib\\index.js!E:\\WebStormProject\\blog-vue-typescript\\node_modules\\ts-loader\\index.js??ref--13-2!E:\\WebStormProject\\blog-vue-typescript\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\WebStormProject\\blog-vue-typescript\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\WebStormProject\\blog-vue-typescript\\src\\views\\message.vue?vue&type=script&lang=ts&","dependencies":[{"path":"E:\\WebStormProject\\blog-vue-typescript\\src\\views\\message.vue","mtime":1573558720919},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\ts-loader\\index.js","mtime":1545640398000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.constructor\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/inherits\";\nimport * as tslib_1 from \"tslib\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nvar check = function check(rule, value, callback) {\n  if (!value) {\n    return callback(new Error(\"邮箱不能为空\"));\n  }\n};\n\nvar checkPhone = function checkPhone(rule, value, callback) {\n  if (!value) {\n    return callback(new Error(\"手机不能为空\"));\n  }\n};\n\nvar checkName = function checkName(rule, value, callback) {\n  if (!value) {\n    return callback(new Error(\"名字不能为空\"));\n  }\n};\n\nvar checkContent = function checkContent(rule, value, callback) {\n  if (!value) {\n    return callback(new Error(\"内容不能为空\"));\n  }\n};\n\nvar Message =\n/*#__PURE__*/\nfunction (_Vue) {\n  _inherits(Message, _Vue);\n\n  function Message() {\n    var _this;\n\n    _classCallCheck(this, Message);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Message).apply(this, arguments)); // initial data\n\n    _this.btnLoading = false;\n    _this.cacheTime = 0; // 缓存时间\n\n    _this.times = 0; // 留言次数\n\n    _this.params = {\n      email: \"\",\n      phone: \"\",\n      name: \"\",\n      content: \"\"\n    };\n    _this.rules = {\n      email: [{\n        validator: check,\n        trigger: \"blur\"\n      }],\n      phone: [{\n        validator: checkPhone,\n        trigger: \"blur\"\n      }],\n      name: [{\n        validator: checkName,\n        trigger: \"blur\"\n      }],\n      content: [{\n        validator: checkContent,\n        trigger: \"blur\"\n      }]\n    };\n    return _this;\n  } // use prop values for initial data\n  // lifecycle hook\n\n\n  _createClass(Message, [{\n    key: \"mounted\",\n    value: function mounted() {} // method\n\n  }, {\n    key: \"submit\",\n    value: function () {\n      var _submit = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var now, nowTime, reg;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(this.times > 3)) {\n                  _context.next = 3;\n                  break;\n                }\n\n                this.$message({\n                  message: \"您今天留言的次数已经用完，明天再来留言吧！\",\n                  type: \"warning\"\n                });\n                return _context.abrupt(\"return\");\n\n              case 3:\n                now = new Date();\n                nowTime = now.getTime();\n\n                if (!(nowTime - this.cacheTime < 60000)) {\n                  _context.next = 8;\n                  break;\n                }\n\n                this.$message({\n                  message: \"您留言太过频繁，1 分钟后再来留言吧！\",\n                  type: \"warning\"\n                });\n                return _context.abrupt(\"return\");\n\n              case 8:\n                reg = new RegExp(\"^[a-z0-9]+([._\\\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$\");\n\n                if (this.params.email) {\n                  _context.next = 14;\n                  break;\n                }\n\n                this.$message({\n                  message: \"邮箱不能为空！\",\n                  type: \"warning\"\n                });\n                return _context.abrupt(\"return\");\n\n              case 14:\n                if (reg.test(this.params.email)) {\n                  _context.next = 19;\n                  break;\n                }\n\n                this.$message({\n                  message: \"请输入格式正确的邮箱！\",\n                  type: \"warning\"\n                });\n                return _context.abrupt(\"return\");\n\n              case 19:\n                if (this.params.phone) {\n                  _context.next = 24;\n                  break;\n                }\n\n                this.$message({\n                  message: \"手机不能为空\",\n                  type: \"warning\"\n                });\n                return _context.abrupt(\"return\");\n\n              case 24:\n                if (this.params.name) {\n                  _context.next = 29;\n                  break;\n                }\n\n                this.$message({\n                  message: \"名字不能为空\",\n                  type: \"warning\"\n                });\n                return _context.abrupt(\"return\");\n\n              case 29:\n                if (this.params.content) {\n                  _context.next = 32;\n                  break;\n                }\n\n                this.$message({\n                  message: \"内容不能为空\",\n                  type: \"warning\"\n                });\n                return _context.abrupt(\"return\");\n\n              case 32:\n                this.btnLoading = true;\n                _context.next = 35;\n                return this.$https.post(this.$urls.addMessage, this.params);\n\n              case 35:\n                this.btnLoading = false;\n                this.times++;\n                this.cacheTime = nowTime;\n                this.$message({\n                  message: \"感谢您的留言，有必要的，博主有空都会回复您的 ！\",\n                  type: \"success\"\n                });\n                this.params.content = \"\";\n\n              case 40:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function submit() {\n        return _submit.apply(this, arguments);\n      }\n\n      return submit;\n    }()\n  }]);\n\n  return Message;\n}(Vue);\n\nMessage = tslib_1.__decorate([Component({})], Message);\nexport default Message;",{"version":3,"sources":["E:\\WebStormProject\\blog-vue-typescript\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\WebStormProject\\blog-vue-typescript\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\WebStormProject\\blog-vue-typescript\\src\\views\\message.vue?vue&type=script&lang=ts&"],"names":[],"mappings":";;;;;;;;;;AAwCA,OAAO,GAAP,MAAgB,KAAhB;AACA,OAAO,SAAP,MAAsB,qBAAtB;;AAGA,IAAM,KAAK,GAAG,SAAR,KAAQ,CACZ,IADY,EAEZ,KAFY,EAGZ,QAHY,EAIL;AACP,MAAI,CAAC,KAAL,EAAY;AACV,WAAO,QAAQ,CAAC,IAAI,KAAJ,CAAU,QAAV,CAAD,CAAf;AACD;AACF,CARD;;AASA,IAAM,UAAU,GAAG,SAAb,UAAa,CACjB,IADiB,EAEjB,KAFiB,EAGjB,QAHiB,EAIV;AACP,MAAI,CAAC,KAAL,EAAY;AACV,WAAO,QAAQ,CAAC,IAAI,KAAJ,CAAU,QAAV,CAAD,CAAf;AACD;AACF,CARD;;AASA,IAAM,SAAS,GAAG,SAAZ,SAAY,CAChB,IADgB,EAEhB,KAFgB,EAGhB,QAHgB,EAIT;AACP,MAAI,CAAC,KAAL,EAAY;AACV,WAAO,QAAQ,CAAC,IAAI,KAAJ,CAAU,QAAV,CAAD,CAAf;AACD;AACF,CARD;;AASA,IAAM,YAAY,GAAG,SAAf,YAAe,CACnB,IADmB,EAEnB,KAFmB,EAGnB,QAHmB,EAIjB;AACF,MAAI,CAAC,KAAL,EAAY;AACV,WAAO,QAAQ,CAAC,IAAI,KAAJ,CAAU,QAAV,CAAD,CAAf;AACD;AACF,CARD;;AAWA,IAAqB,OAArB;AAAA;AAAA;AAAA;;AADA,qBAAA;AAAA;;AAAA;;8FAAA,CAEE;;AACQ,UAAA,UAAA,GAAsB,KAAtB;AACA,UAAA,SAAA,GAAoB,CAApB,CAJV,CAIiC;;AACvB,UAAA,KAAA,GAAgB,CAAhB,CALV,CAK6B;;AACnB,UAAA,MAAA,GAAwB;AAC9B,MAAA,KAAK,EAAE,EADuB;AAE9B,MAAA,KAAK,EAAE,EAFuB;AAG9B,MAAA,IAAI,EAAE,EAHwB;AAI9B,MAAA,OAAO,EAAE;AAJqB,KAAxB;AAMA,UAAA,KAAA,GAAe;AACrB,MAAA,KAAK,EAAE,CAAC;AAAE,QAAA,SAAS,EAAE,KAAb;AAAoB,QAAA,OAAO,EAAE;AAA7B,OAAD,CADc;AAErB,MAAA,KAAK,EAAE,CAAC;AAAE,QAAA,SAAS,EAAE,UAAb;AAAyB,QAAA,OAAO,EAAE;AAAlC,OAAD,CAFc;AAGrB,MAAA,IAAI,EAAE,CAAC;AAAE,QAAA,SAAS,EAAE,SAAb;AAAwB,QAAA,OAAO,EAAE;AAAjC,OAAD,CAHe;AAIrB,MAAA,OAAO,EAAE,CAAC;AAAE,QAAA,SAAS,EAAE,YAAb;AAA2B,QAAA,OAAO,EAAE;AAApC,OAAD;AAJY,KAAf;AAZV;AA0FC,GAzFD,CAkBE;AAEA;;;AApBF;AAAA;AAAA,8BAqBS,CAAK,CArBd,CAuBE;;AAvBF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAyBQ,KAAK,KAAL,GAAa,CAzBrB;AAAA;AAAA;AAAA;;AA0BM,qBAAK,QAAL,CAAc;AACZ,kBAAA,OAAO,EAAE,uBADG;AAEZ,kBAAA,IAAI,EAAE;AAFM,iBAAd;AA1BN;;AAAA;AAiCQ,gBAAA,GAjCR,GAiCc,IAAI,IAAJ,EAjCd;AAkCQ,gBAAA,OAlCR,GAkCkB,GAAG,CAAC,OAAJ,EAlClB;;AAAA,sBAmCQ,OAAO,GAAG,KAAK,SAAf,GAA2B,KAnCnC;AAAA;AAAA;AAAA;;AAoCM,qBAAK,QAAL,CAAc;AACZ,kBAAA,OAAO,EAAE,qBADG;AAEZ,kBAAA,IAAI,EAAE;AAFM,iBAAd;AApCN;;AAAA;AA2CU,gBAAA,GA3CV,GA2CwB,IAAI,MAAJ,CAClB,+EADkB,CA3CxB;;AAAA,oBA8CS,KAAK,MAAL,CAAY,KA9CrB;AAAA;AAAA;AAAA;;AA+CM,qBAAK,QAAL,CAAc;AACZ,kBAAA,OAAO,EAAE,SADG;AAEZ,kBAAA,IAAI,EAAE;AAFM,iBAAd;AA/CN;;AAAA;AAAA,oBAoDgB,GAAG,CAAC,IAAJ,CAAS,KAAK,MAAL,CAAY,KAArB,CApDhB;AAAA;AAAA;AAAA;;AAqDM,qBAAK,QAAL,CAAc;AACZ,kBAAA,OAAO,EAAE,aADG;AAEZ,kBAAA,IAAI,EAAE;AAFM,iBAAd;AArDN;;AAAA;AAAA,oBA0DgB,KAAK,MAAL,CAAY,KA1D5B;AAAA;AAAA;AAAA;;AA2DM,qBAAK,QAAL,CAAc;AACZ,kBAAA,OAAO,EAAE,QADG;AAEZ,kBAAA,IAAI,EAAE;AAFM,iBAAd;AA3DN;;AAAA;AAAA,oBAgEgB,KAAK,MAAL,CAAY,IAhE5B;AAAA;AAAA;AAAA;;AAiEM,qBAAK,QAAL,CAAc;AACZ,kBAAA,OAAO,EAAE,QADG;AAEZ,kBAAA,IAAI,EAAE;AAFM,iBAAd;AAjEN;;AAAA;AAAA,oBAsEgB,KAAK,MAAL,CAAY,OAtE5B;AAAA;AAAA;AAAA;;AAuEM,qBAAK,QAAL,CAAc;AACZ,kBAAA,OAAO,EAAE,QADG;AAEZ,kBAAA,IAAI,EAAE;AAFM,iBAAd;AAvEN;;AAAA;AA6EI,qBAAK,UAAL,GAAkB,IAAlB;AA7EJ;AAAA,uBA8EU,KAAK,MAAL,CAAY,IAAZ,CAAiB,KAAK,KAAL,CAAW,UAA5B,EAAwC,KAAK,MAA7C,CA9EV;;AAAA;AA+EI,qBAAK,UAAL,GAAkB,KAAlB;AAEA,qBAAK,KAAL;AACA,qBAAK,SAAL,GAAiB,OAAjB;AACA,qBAAK,QAAL,CAAc;AACZ,kBAAA,OAAO,EAAE,0BADG;AAEZ,kBAAA,IAAI,EAAE;AAFM,iBAAd;AAIA,qBAAK,MAAL,CAAY,OAAZ,GAAsB,EAAtB;;AAvFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,EAAqC,GAArC,CAAA;;AAAqB,OAAO,GAAA,OAAA,CAAA,UAAA,CAAA,CAD3B,SAAS,CAAC,EAAD,CACkB,CAAA,EAAP,OAAO,CAAP;eAAA,O","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport Component from \"vue-class-component\";\r\nimport { MessageParams, RulesItem, Rules } from \"@/types/index\";\r\n\r\nconst check = (\r\n  rule: any,\r\n  value: string | any,\r\n  callback: Function | any\r\n): any => {\r\n  if (!value) {\r\n    return callback(new Error(\"邮箱不能为空\"));\r\n  }\r\n};\r\nconst checkPhone = (\r\n  rule: any,\r\n  value: string | any,\r\n  callback: Function | any\r\n): any => {\r\n  if (!value) {\r\n    return callback(new Error(\"手机不能为空\"));\r\n  }\r\n};\r\nconst checkName = (\r\n  rule: any,\r\n  value: string | any,\r\n  callback: Function | any\r\n): any => {\r\n  if (!value) {\r\n    return callback(new Error(\"名字不能为空\"));\r\n  }\r\n};\r\nconst checkContent = (\r\n  rule: any,\r\n  value: string | any,\r\n  callback: Function | any\r\n) => {\r\n  if (!value) {\r\n    return callback(new Error(\"内容不能为空\"));\r\n  }\r\n};\r\n\r\n@Component({})\r\nexport default class Message extends Vue {\r\n  // initial data\r\n  private btnLoading: boolean = false;\r\n  private cacheTime: number = 0; // 缓存时间\r\n  private times: number = 0; // 留言次数\r\n  private params: MessageParams = {\r\n    email: \"\",\r\n    phone: \"\",\r\n    name: \"\",\r\n    content: \"\"\r\n  };\r\n  private rules: Rules = {\r\n    email: [{ validator: check, trigger: \"blur\" }],\r\n    phone: [{ validator: checkPhone, trigger: \"blur\" }],\r\n    name: [{ validator: checkName, trigger: \"blur\" }],\r\n    content: [{ validator: checkContent, trigger: \"blur\" }]\r\n  };\r\n\r\n  // use prop values for initial data\r\n\r\n  // lifecycle hook\r\n  mounted() {}\r\n\r\n  // method\r\n  private async submit(): Promise<void> {\r\n    if (this.times > 3) {\r\n      this.$message({\r\n        message: \"您今天留言的次数已经用完，明天再来留言吧！\",\r\n        type: \"warning\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    let now = new Date();\r\n    let nowTime = now.getTime();\r\n    if (nowTime - this.cacheTime < 60000) {\r\n      this.$message({\r\n        message: \"您留言太过频繁，1 分钟后再来留言吧！\",\r\n        type: \"warning\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    const reg: RegExp = new RegExp(\r\n      \"^[a-z0-9]+([._\\\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$\"\r\n    );\r\n    if (!this.params.email) {\r\n      this.$message({\r\n        message: \"邮箱不能为空！\",\r\n        type: \"warning\"\r\n      });\r\n      return;\r\n    } else if (!reg.test(this.params.email)) {\r\n      this.$message({\r\n        message: \"请输入格式正确的邮箱！\",\r\n        type: \"warning\"\r\n      });\r\n      return;\r\n    } else if (!this.params.phone) {\r\n      this.$message({\r\n        message: \"手机不能为空\",\r\n        type: \"warning\"\r\n      });\r\n      return;\r\n    } else if (!this.params.name) {\r\n      this.$message({\r\n        message: \"名字不能为空\",\r\n        type: \"warning\"\r\n      });\r\n      return;\r\n    } else if (!this.params.content) {\r\n      this.$message({\r\n        message: \"内容不能为空\",\r\n        type: \"warning\"\r\n      });\r\n      return;\r\n    }\r\n    this.btnLoading = true;\r\n    await this.$https.post(this.$urls.addMessage, this.params);\r\n    this.btnLoading = false;\r\n\r\n    this.times++;\r\n    this.cacheTime = nowTime;\r\n    this.$message({\r\n      message: \"感谢您的留言，有必要的，博主有空都会回复您的 ！\",\r\n      type: \"success\"\r\n    });\r\n    this.params.content = \"\";\r\n  }\r\n}\r\n"],"sourceRoot":""}]}