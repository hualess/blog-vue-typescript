{"remainingRequest":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\babel-loader\\lib\\index.js!E:\\WebStormProject\\blog-vue-typescript\\node_modules\\ts-loader\\index.js??ref--13-2!E:\\WebStormProject\\blog-vue-typescript\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\WebStormProject\\blog-vue-typescript\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\WebStormProject\\blog-vue-typescript\\src\\components\\nav.vue?vue&type=script&lang=ts&","dependencies":[{"path":"E:\\WebStormProject\\blog-vue-typescript\\src\\components\\nav.vue","mtime":1573632386328},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\ts-loader\\index.js","mtime":1545640398000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\ts-loader\\index.js","mtime":1545640398000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _JSON$stringify from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/json/stringify\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.function.name\";\nimport _classCallCheck from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/inherits\";\nimport * as tslib_1 from \"tslib\";\nimport { Component, Vue, Watch } from \"vue-property-decorator\";\nimport RegisterAndLogin from \"@/components/registerAndLogin.vue\";\nimport { isMobileOrPc, getQueryStringByName } from \"@/utils/utils\";\n\nvar Nav =\n/*#__PURE__*/\nfunction (_Vue) {\n  _inherits(Nav, _Vue);\n\n  function Nav() {\n    var _this;\n\n    _classCallCheck(this, Nav);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Nav).apply(this, arguments));\n    _this.visible = false;\n    _this.handleFlag = \"\";\n    _this.title = \"首页\";\n    _this.list = [{\n      index: \"1\",\n      path: \"/\",\n      name: \"首页\"\n    }, {\n      index: \"2\",\n      path: \"/articles\",\n      name: \"文章\"\n    }, {\n      index: \"3\",\n      path: \"/archive\",\n      name: \"归档\"\n    }, {\n      index: \"4\",\n      path: \"/project\",\n      name: \"项目\"\n    }, {\n      index: \"5\",\n      path: \"/timeline\",\n      name: \"历程\"\n    }, {\n      index: \"6\",\n      path: \"/message\",\n      name: \"留言\"\n    }, {\n      index: \"7\",\n      path: \"/about\",\n      name: \"关于\"\n    }];\n    _this.activeIndex = \"0\";\n    _this.enterSlideUp = false;\n    _this.leaveSlideDown = false;\n    _this.isShow = false;\n    _this.isMobile = isMobileOrPc();\n    return _this;\n  }\n\n  _createClass(Nav, [{\n    key: \"mounted\",\n    value: function mounted() {\n      // 授权登录的，有 code 参数\n      this.routeChange(this.$route, this.$route);\n      var code = getQueryStringByName(\"code\");\n\n      if (code) {\n        this.getUser(code);\n      }\n    }\n  }, {\n    key: \"routeChange\",\n    value: function routeChange(val, oldVal) {\n      for (var i = 0; i < this.list.length; i++) {\n        var l = this.list[i];\n\n        if (l.path === val.path) {\n          this.activeIndex = i + 1 + \"\";\n          this.title = l.name;\n          break;\n        }\n      }\n    }\n  }, {\n    key: \"handleClickMenu\",\n    value: function handleClickMenu(route) {\n      this.isShow = false;\n\n      if (route === \"/login\") {\n        this.handleFlag = \"login\";\n        this.visible = true;\n      }\n\n      if (route === \"/register\") {\n        this.handleFlag = \"register\";\n        this.visible = true;\n      }\n\n      if (route === \"/logout\") {\n        this.handleLogout();\n      }\n    }\n  }, {\n    key: \"handleMenu\",\n    value: function handleMenu() {\n      this.isShow = true;\n      this.enterSlideUp = true;\n    }\n  }, {\n    key: \"handleHideMenu\",\n    value: function handleHideMenu() {\n      var _this2 = this;\n\n      this.enterSlideUp = false;\n      this.leaveSlideDown = true;\n      setTimeout(function () {\n        _this2.leaveSlideDown = false;\n        _this2.isShow = false;\n      }, 300);\n    }\n  }, {\n    key: \"getUser\",\n    value: function () {\n      var _getUser = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(code) {\n        var loading, data, userInfo, preventHistory;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                loading = this.$loading({\n                  lock: true,\n                  text: \"Loading\",\n                  spinner: \"el-icon-loading\",\n                  background: \"rgba(255, 255, 255, 0.7)\"\n                });\n                _context.next = 3;\n                return this.$https.post(this.$urls.getUser, {\n                  code: code\n                }, {\n                  withCredentials: true\n                });\n\n              case 3:\n                data = _context.sent;\n                loading.close();\n                userInfo = {\n                  _id: data._id,\n                  name: data.name,\n                  avatar: data.avatar\n                };\n                this.$store.commit(\"SAVE_USER\", {\n                  userInfo: userInfo\n                });\n                window.sessionStorage.userInfo = _JSON$stringify(userInfo);\n                this.$message({\n                  message: \"操作成功\",\n                  type: \"success\"\n                });\n                preventHistory = JSON.parse(window.sessionStorage.preventHistory);\n\n                if (preventHistory) {\n                  this.$router.push({\n                    path: preventHistory.name,\n                    query: preventHistory.query\n                  });\n                }\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getUser(_x) {\n        return _getUser.apply(this, arguments);\n      }\n\n      return getUser;\n    }()\n  }, {\n    key: \"handleLogout\",\n    value: function handleLogout() {\n      window.sessionStorage.userInfo = \"\";\n      this.$store.commit(\"SAVE_USER\", {\n        userInfo: {\n          _id: \"\",\n          name: \"\",\n          avatar: \"\"\n        }\n      });\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(value) {\n      this.handleFlag = value;\n      this.visible = true;\n    }\n  }, {\n    key: \"handleCancel\",\n    value: function handleCancel(value) {\n      this.visible = value;\n    }\n  }, {\n    key: \"handleOk\",\n    value: function handleOk(value) {\n      this.visible = value;\n    }\n  }, {\n    key: \"handleSelect\",\n    value: function handleSelect(val, oldVal) {\n      // console.log(\"val :\", val);\n      // console.log(\"oldVal :\", oldVal);\n      this.activeIndex = val;\n    }\n  }, {\n    key: \"userInfo\",\n    get: function get() {\n      var userInfo = {\n        _id: \"\",\n        name: \"\",\n        avatar: \"\"\n      };\n\n      if (window.sessionStorage.userInfo) {\n        userInfo = JSON.parse(window.sessionStorage.userInfo);\n        this.$store.commit(\"SAVE_USER\", {\n          userInfo: userInfo\n        });\n      }\n\n      if (this.$store.state.user.userInfo) {\n        userInfo = this.$store.state.user.userInfo;\n      }\n\n      return userInfo;\n    }\n  }]);\n\n  return Nav;\n}(Vue);\n\ntslib_1.__decorate([Watch(\"$route\")], Nav.prototype, \"routeChange\", null);\n\nNav = tslib_1.__decorate([Component({\n  components: {\n    RegisterAndLogin: RegisterAndLogin\n  }\n})], Nav);\nexport default Nav;",{"version":3,"sources":["E:\\WebStormProject\\blog-vue-typescript\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\WebStormProject\\blog-vue-typescript\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\WebStormProject\\blog-vue-typescript\\src\\components\\nav.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue, Watch } from \"vue-property-decorator\";\r\nimport RegisterAndLogin from \"@/components/registerAndLogin.vue\";\r\nimport { isMobileOrPc, getQueryStringByName } from \"@/utils/utils\";\r\nimport { Route } from \"vue-router\";\r\nimport { UserInfo, NavListItem } from \"@/types/index\";\r\n\r\n@Component({\r\n  components: {\r\n    RegisterAndLogin\r\n  }\r\n})\r\nexport default class Nav extends Vue {\r\n  private visible: boolean = false;\r\n  private handleFlag: string = \"\";\r\n  private title: string = \"首页\";\r\n  private list: Array<NavListItem> = [\r\n    {\r\n      index: \"1\",\r\n      path: \"/\",\r\n      name: \"首页\"\r\n    },\r\n    {\r\n      index: \"2\",\r\n      path: \"/articles\",\r\n      name: \"文章\"\r\n    },\r\n    {\r\n      index: \"3\",\r\n      path: \"/archive\",\r\n      name: \"归档\"\r\n    },\r\n    {\r\n      index: \"4\",\r\n      path: \"/project\",\r\n      name: \"项目\"\r\n    },\r\n    {\r\n      index: \"5\",\r\n      path: \"/timeline\",\r\n      name: \"历程\"\r\n    },\r\n    {\r\n      index: \"6\",\r\n      path: \"/message\",\r\n      name: \"留言\"\r\n    },\r\n    {\r\n      index: \"7\",\r\n      path: \"/about\",\r\n      name: \"关于\"\r\n    }\r\n  ];\r\n  private activeIndex: string = \"0\";\r\n  private enterSlideUp: boolean = false;\r\n  private leaveSlideDown: boolean = false;\r\n  private isShow: boolean = false;\r\n  private isMobile: boolean = isMobileOrPc();\r\n\r\n  mounted() {\r\n    // 授权登录的，有 code 参数\r\n    this.routeChange(this.$route, this.$route);\r\n    const code: string = getQueryStringByName(\"code\");\r\n    if (code) {\r\n      this.getUser(code);\r\n    }\r\n  }\r\n\r\n  get userInfo(): UserInfo {\r\n    let userInfo: UserInfo = {\r\n      _id: \"\",\r\n      name: \"\",\r\n      avatar: \"\"\r\n    };\r\n    if (window.sessionStorage.userInfo) {\r\n      userInfo = JSON.parse(window.sessionStorage.userInfo);\r\n      this.$store.commit(\"SAVE_USER\", {\r\n        userInfo\r\n      });\r\n    }\r\n    if (this.$store.state.user.userInfo) {\r\n      userInfo = this.$store.state.user.userInfo;\r\n    }\r\n    return userInfo;\r\n  }\r\n\r\n  @Watch(\"$route\")\r\n  routeChange(val: Route, oldVal: Route): void {\r\n    for (let i = 0; i < this.list.length; i++) {\r\n      const l: NavListItem = this.list[i];\r\n      if (l.path === val.path) {\r\n        this.activeIndex = i + 1 + \"\";\r\n        this.title = l.name;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  private handleClickMenu(route: string): void {\r\n    this.isShow = false;\r\n    if (route === \"/login\") {\r\n      this.handleFlag = \"login\";\r\n      this.visible = true;\r\n    }\r\n    if (route === \"/register\") {\r\n      this.handleFlag = \"register\";\r\n      this.visible = true;\r\n    }\r\n    if (route === \"/logout\") {\r\n      this.handleLogout();\r\n    }\r\n  }\r\n  private handleMenu(): void {\r\n    this.isShow = true;\r\n    this.enterSlideUp = true;\r\n  }\r\n  private handleHideMenu(): void {\r\n    this.enterSlideUp = false;\r\n    this.leaveSlideDown = true;\r\n    setTimeout(() => {\r\n      this.leaveSlideDown = false;\r\n      this.isShow = false;\r\n    }, 300);\r\n  }\r\n\r\n  private async getUser(code: string): Promise<void> {\r\n    const loading: any = this.$loading({\r\n      lock: true,\r\n      text: \"Loading\",\r\n      spinner: \"el-icon-loading\",\r\n      background: \"rgba(255, 255, 255, 0.7)\"\r\n    });\r\n    const data: UserInfo = await this.$https.post(\r\n      this.$urls.getUser,\r\n      { code },\r\n      { withCredentials: true }\r\n    );\r\n    loading.close();\r\n\r\n    const userInfo: UserInfo = {\r\n      _id: data._id,\r\n      name: data.name,\r\n      avatar: data.avatar\r\n    };\r\n    this.$store.commit(\"SAVE_USER\", {\r\n      userInfo\r\n    });\r\n    window.sessionStorage.userInfo = JSON.stringify(userInfo);\r\n    this.$message({\r\n      message: \"操作成功\",\r\n      type: \"success\"\r\n    });\r\n    let preventHistory = JSON.parse(window.sessionStorage.preventHistory);\r\n    if (preventHistory) {\r\n      this.$router.push({\r\n        path: preventHistory.name,\r\n        query: preventHistory.query\r\n      });\r\n    }\r\n  }\r\n\r\n  private handleLogout(): void {\r\n    window.sessionStorage.userInfo = \"\";\r\n    this.$store.commit(\"SAVE_USER\", {\r\n      userInfo: {\r\n        _id: \"\",\r\n        name: \"\",\r\n        avatar: \"\"\r\n      }\r\n    });\r\n  }\r\n\r\n  private handleClick(value: string): void {\r\n    this.handleFlag = value;\r\n    this.visible = true;\r\n  }\r\n\r\n  private handleCancel(value: boolean): void {\r\n    this.visible = value;\r\n  }\r\n  private handleOk(value: boolean): void {\r\n    this.visible = value;\r\n  }\r\n  private handleSelect(val: string, oldVal: string): void {\r\n    // console.log(\"val :\", val);\r\n    // console.log(\"oldVal :\", oldVal);\r\n    this.activeIndex = val;\r\n  }\r\n}\r\n"],"sourceRoot":""}]}