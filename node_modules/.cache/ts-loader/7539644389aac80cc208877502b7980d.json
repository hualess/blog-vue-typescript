{"remainingRequest":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\thread-loader\\dist\\cjs.js!E:\\WebStormProject\\blog-vue-typescript\\node_modules\\babel-loader\\lib\\index.js!E:\\WebStormProject\\blog-vue-typescript\\node_modules\\ts-loader\\index.js??ref--13-3!E:\\WebStormProject\\blog-vue-typescript\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\WebStormProject\\blog-vue-typescript\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\WebStormProject\\blog-vue-typescript\\src\\components\\comment.vue?vue&type=script&lang=ts&","dependencies":[{"path":"E:\\WebStormProject\\blog-vue-typescript\\src\\components\\comment.vue","mtime":1573558720908},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\ts-loader\\index.js","mtime":1545640398000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Button2 from \"element-ui/lib/theme-chalk/button.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Button from \"element-ui/lib/button\";\nimport _Input2 from \"element-ui/lib/theme-chalk/input.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Input from \"element-ui/lib/input\";\nimport _FormItem2 from \"element-ui/lib/theme-chalk/form-item.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _FormItem from \"element-ui/lib/form-item\";\nimport _Form2 from \"element-ui/lib/theme-chalk/form.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Form from \"element-ui/lib/form\";\nimport _Dialog2 from \"element-ui/lib/theme-chalk/dialog.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Dialog from \"element-ui/lib/dialog\";\nimport _JSON$stringify from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/json/stringify\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/inherits\";\nimport * as tslib_1 from \"tslib\";\nimport { Component, Emit, Prop, Vue } from \"vue-property-decorator\";\n\nvar Comment =\n/*#__PURE__*/\nfunction (_Vue) {\n  _inherits(Comment, _Vue);\n\n  function Comment() {\n    var _this;\n\n    _classCallCheck(this, Comment);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Comment).apply(this, arguments)); // initial data\n\n    _this.btnLoading = false;\n    _this.content = \"\";\n    _this.cacheTime = 0; // 缓存时间\n\n    _this.times = 0; // 留言次数\n\n    return _this;\n  } // computed\n\n\n  _createClass(Comment, [{\n    key: \"cancel\",\n    // this.$emit\n    value: function cancel() {}\n  }, {\n    key: \"handleOk\",\n    value: function () {\n      var _handleOk = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var now, nowTime, user_id, userInfo;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (this.article_id) {\n                  _context.next = 3;\n                  break;\n                }\n\n                this.$message({\n                  message: \"该文章不存在！\",\n                  type: \"error\"\n                });\n                return _context.abrupt(\"return\");\n\n              case 3:\n                if (!(this.times > 2)) {\n                  _context.next = 6;\n                  break;\n                }\n\n                this.$message({\n                  message: \"您今天评论的次数已经用完，明天再来评论吧！\",\n                  type: \"warning\"\n                });\n                return _context.abrupt(\"return\");\n\n              case 6:\n                now = new Date();\n                nowTime = now.getTime();\n\n                if (!(nowTime - this.cacheTime < 4000)) {\n                  _context.next = 11;\n                  break;\n                }\n\n                this.$message({\n                  message: \"您评论太过频繁，1 分钟后再来评论吧！\",\n                  type: \"warning\"\n                });\n                return _context.abrupt(\"return\");\n\n              case 11:\n                if (this.content) {\n                  _context.next = 14;\n                  break;\n                }\n\n                this.$message({\n                  message: \"评论内容不能为空\",\n                  type: \"error\"\n                });\n                return _context.abrupt(\"return\");\n\n              case 14:\n                user_id = \"\";\n\n                if (!window.sessionStorage.userInfo) {\n                  _context.next = 20;\n                  break;\n                }\n\n                userInfo = JSON.parse(window.sessionStorage.userInfo);\n                user_id = userInfo._id;\n                _context.next = 22;\n                break;\n\n              case 20:\n                this.$message({\n                  message: \"登录才能评论，请先登录！\",\n                  type: \"warning\"\n                });\n                return _context.abrupt(\"return\");\n\n              case 22:\n                this.btnLoading = true;\n                _context.next = 25;\n                return this.$https.post(this.$urls.addThirdComment, {\n                  article_id: this.article_id,\n                  user_id: user_id,\n                  comment_id: this.comment_id,\n                  to_user: _JSON$stringify(this.to_user),\n                  content: this.content\n                });\n\n              case 25:\n                this.btnLoading = false;\n                this.times++;\n                this.cacheTime = nowTime;\n                this.content = \"\";\n                this.$message({\n                  message: \"操作成功\",\n                  type: \"success\"\n                });\n\n              case 30:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function handleOk() {\n        return _handleOk.apply(this, arguments);\n      }\n\n      return handleOk;\n    }()\n  }, {\n    key: \"dialogVisible\",\n    get: function get() {\n      return this.visible;\n    }\n  }]);\n\n  return Comment;\n}(Vue);\n\ntslib_1.__decorate([Prop({\n  default: false\n})], Comment.prototype, \"visible\", void 0);\n\ntslib_1.__decorate([Prop({\n  default: \"\"\n})], Comment.prototype, \"comment_id\", void 0);\n\ntslib_1.__decorate([Prop({\n  default: \"\"\n})], Comment.prototype, \"article_id\", void 0);\n\ntslib_1.__decorate([Prop({\n  default: {}\n})], Comment.prototype, \"to_user\", void 0);\n\ntslib_1.__decorate([Emit()], Comment.prototype, \"cancel\", null);\n\ntslib_1.__decorate([Emit(\"handleOk\")], Comment.prototype, \"handleOk\", null);\n\nComment = tslib_1.__decorate([Component({\n  components: {\n    Dialog: _Dialog,\n    Form: _Form,\n    FormItem: _FormItem,\n    Input: _Input,\n    Button: _Button\n  }\n})], Comment);\nexport default Comment;",null]}