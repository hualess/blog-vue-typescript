{"remainingRequest":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\thread-loader\\dist\\cjs.js!E:\\WebStormProject\\blog-vue-typescript\\node_modules\\babel-loader\\lib\\index.js!E:\\WebStormProject\\blog-vue-typescript\\node_modules\\ts-loader\\index.js??ref--13-3!E:\\WebStormProject\\blog-vue-typescript\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\WebStormProject\\blog-vue-typescript\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\WebStormProject\\blog-vue-typescript\\src\\views\\message.vue?vue&type=script&lang=ts&","dependencies":[{"path":"E:\\WebStormProject\\blog-vue-typescript\\src\\views\\message.vue","mtime":1573558720919},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\ts-loader\\index.js","mtime":1545640398000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.constructor\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/inherits\";\nimport * as tslib_1 from \"tslib\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\nvar check = function check(rule, value, callback) {\n  if (!value) {\n    return callback(new Error(\"邮箱不能为空\"));\n  }\n};\n\nvar checkPhone = function checkPhone(rule, value, callback) {\n  if (!value) {\n    return callback(new Error(\"手机不能为空\"));\n  }\n};\n\nvar checkName = function checkName(rule, value, callback) {\n  if (!value) {\n    return callback(new Error(\"名字不能为空\"));\n  }\n};\n\nvar checkContent = function checkContent(rule, value, callback) {\n  if (!value) {\n    return callback(new Error(\"内容不能为空\"));\n  }\n};\n\nvar Message =\n/*#__PURE__*/\nfunction (_Vue) {\n  _inherits(Message, _Vue);\n\n  function Message() {\n    var _this;\n\n    _classCallCheck(this, Message);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Message).apply(this, arguments)); // initial data\n\n    _this.btnLoading = false;\n    _this.cacheTime = 0; // 缓存时间\n\n    _this.times = 0; // 留言次数\n\n    _this.params = {\n      email: \"\",\n      phone: \"\",\n      name: \"\",\n      content: \"\"\n    };\n    _this.rules = {\n      email: [{\n        validator: check,\n        trigger: \"blur\"\n      }],\n      phone: [{\n        validator: checkPhone,\n        trigger: \"blur\"\n      }],\n      name: [{\n        validator: checkName,\n        trigger: \"blur\"\n      }],\n      content: [{\n        validator: checkContent,\n        trigger: \"blur\"\n      }]\n    };\n    return _this;\n  } // use prop values for initial data\n  // lifecycle hook\n\n\n  _createClass(Message, [{\n    key: \"mounted\",\n    value: function mounted() {} // method\n\n  }, {\n    key: \"submit\",\n    value: function () {\n      var _submit = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var now, nowTime, reg;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(this.times > 3)) {\n                  _context.next = 3;\n                  break;\n                }\n\n                this.$message({\n                  message: \"您今天留言的次数已经用完，明天再来留言吧！\",\n                  type: \"warning\"\n                });\n                return _context.abrupt(\"return\");\n\n              case 3:\n                now = new Date();\n                nowTime = now.getTime();\n\n                if (!(nowTime - this.cacheTime < 60000)) {\n                  _context.next = 8;\n                  break;\n                }\n\n                this.$message({\n                  message: \"您留言太过频繁，1 分钟后再来留言吧！\",\n                  type: \"warning\"\n                });\n                return _context.abrupt(\"return\");\n\n              case 8:\n                reg = new RegExp(\"^[a-z0-9]+([._\\\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$\");\n\n                if (this.params.email) {\n                  _context.next = 14;\n                  break;\n                }\n\n                this.$message({\n                  message: \"邮箱不能为空！\",\n                  type: \"warning\"\n                });\n                return _context.abrupt(\"return\");\n\n              case 14:\n                if (reg.test(this.params.email)) {\n                  _context.next = 19;\n                  break;\n                }\n\n                this.$message({\n                  message: \"请输入格式正确的邮箱！\",\n                  type: \"warning\"\n                });\n                return _context.abrupt(\"return\");\n\n              case 19:\n                if (this.params.phone) {\n                  _context.next = 24;\n                  break;\n                }\n\n                this.$message({\n                  message: \"手机不能为空\",\n                  type: \"warning\"\n                });\n                return _context.abrupt(\"return\");\n\n              case 24:\n                if (this.params.name) {\n                  _context.next = 29;\n                  break;\n                }\n\n                this.$message({\n                  message: \"名字不能为空\",\n                  type: \"warning\"\n                });\n                return _context.abrupt(\"return\");\n\n              case 29:\n                if (this.params.content) {\n                  _context.next = 32;\n                  break;\n                }\n\n                this.$message({\n                  message: \"内容不能为空\",\n                  type: \"warning\"\n                });\n                return _context.abrupt(\"return\");\n\n              case 32:\n                this.btnLoading = true;\n                _context.next = 35;\n                return this.$https.post(this.$urls.addMessage, this.params);\n\n              case 35:\n                this.btnLoading = false;\n                this.times++;\n                this.cacheTime = nowTime;\n                this.$message({\n                  message: \"感谢您的留言，有必要的，博主有空都会回复您的 ！\",\n                  type: \"success\"\n                });\n                this.params.content = \"\";\n\n              case 40:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function submit() {\n        return _submit.apply(this, arguments);\n      }\n\n      return submit;\n    }()\n  }]);\n\n  return Message;\n}(Vue);\n\nMessage = tslib_1.__decorate([Component({})], Message);\nexport default Message;",null]}