{"remainingRequest":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\thread-loader\\dist\\cjs.js!E:\\WebStormProject\\blog-vue-typescript\\node_modules\\babel-loader\\lib\\index.js!E:\\WebStormProject\\blog-vue-typescript\\node_modules\\ts-loader\\index.js??ref--13-3!E:\\WebStormProject\\blog-vue-typescript\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\WebStormProject\\blog-vue-typescript\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\WebStormProject\\blog-vue-typescript\\src\\components\\nav.vue?vue&type=script&lang=ts&","dependencies":[{"path":"E:\\WebStormProject\\blog-vue-typescript\\src\\components\\nav.vue","mtime":1573632386328},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\ts-loader\\index.js","mtime":1545640398000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WebStormProject\\blog-vue-typescript\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _JSON$stringify from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/json/stringify\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.function.name\";\nimport _classCallCheck from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\WebStormProject\\\\blog-vue-typescript\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/inherits\";\nimport * as tslib_1 from \"tslib\";\nimport { Component, Vue, Watch } from \"vue-property-decorator\";\nimport RegisterAndLogin from \"@/components/registerAndLogin.vue\";\nimport { isMobileOrPc, getQueryStringByName } from \"@/utils/utils\";\n\nvar Nav =\n/*#__PURE__*/\nfunction (_Vue) {\n  _inherits(Nav, _Vue);\n\n  function Nav() {\n    var _this;\n\n    _classCallCheck(this, Nav);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Nav).apply(this, arguments));\n    _this.visible = false;\n    _this.handleFlag = \"\";\n    _this.title = \"首页\";\n    _this.list = [{\n      index: \"1\",\n      path: \"/\",\n      name: \"首页\"\n    }, {\n      index: \"2\",\n      path: \"/articles\",\n      name: \"文章\"\n    }, {\n      index: \"3\",\n      path: \"/archive\",\n      name: \"归档\"\n    }, {\n      index: \"4\",\n      path: \"/project\",\n      name: \"项目\"\n    }, {\n      index: \"5\",\n      path: \"/timeline\",\n      name: \"历程\"\n    }, {\n      index: \"6\",\n      path: \"/message\",\n      name: \"留言\"\n    }, {\n      index: \"7\",\n      path: \"/about\",\n      name: \"关于\"\n    }];\n    _this.activeIndex = \"0\";\n    _this.enterSlideUp = false;\n    _this.leaveSlideDown = false;\n    _this.isShow = false;\n    _this.isMobile = isMobileOrPc();\n    return _this;\n  }\n\n  _createClass(Nav, [{\n    key: \"mounted\",\n    value: function mounted() {\n      // 授权登录的，有 code 参数\n      this.routeChange(this.$route, this.$route);\n      var code = getQueryStringByName(\"code\");\n\n      if (code) {\n        this.getUser(code);\n      }\n    }\n  }, {\n    key: \"routeChange\",\n    value: function routeChange(val, oldVal) {\n      for (var i = 0; i < this.list.length; i++) {\n        var l = this.list[i];\n\n        if (l.path === val.path) {\n          this.activeIndex = i + 1 + \"\";\n          this.title = l.name;\n          break;\n        }\n      }\n    }\n  }, {\n    key: \"handleClickMenu\",\n    value: function handleClickMenu(route) {\n      this.isShow = false;\n\n      if (route === \"/login\") {\n        this.handleFlag = \"login\";\n        this.visible = true;\n      }\n\n      if (route === \"/register\") {\n        this.handleFlag = \"register\";\n        this.visible = true;\n      }\n\n      if (route === \"/logout\") {\n        this.handleLogout();\n      }\n    }\n  }, {\n    key: \"handleMenu\",\n    value: function handleMenu() {\n      this.isShow = true;\n      this.enterSlideUp = true;\n    }\n  }, {\n    key: \"handleHideMenu\",\n    value: function handleHideMenu() {\n      var _this2 = this;\n\n      this.enterSlideUp = false;\n      this.leaveSlideDown = true;\n      setTimeout(function () {\n        _this2.leaveSlideDown = false;\n        _this2.isShow = false;\n      }, 300);\n    }\n  }, {\n    key: \"getUser\",\n    value: function () {\n      var _getUser = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(code) {\n        var loading, data, userInfo, preventHistory;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                loading = this.$loading({\n                  lock: true,\n                  text: \"Loading\",\n                  spinner: \"el-icon-loading\",\n                  background: \"rgba(255, 255, 255, 0.7)\"\n                });\n                _context.next = 3;\n                return this.$https.post(this.$urls.getUser, {\n                  code: code\n                }, {\n                  withCredentials: true\n                });\n\n              case 3:\n                data = _context.sent;\n                loading.close();\n                userInfo = {\n                  _id: data._id,\n                  name: data.name,\n                  avatar: data.avatar\n                };\n                this.$store.commit(\"SAVE_USER\", {\n                  userInfo: userInfo\n                });\n                window.sessionStorage.userInfo = _JSON$stringify(userInfo);\n                this.$message({\n                  message: \"操作成功\",\n                  type: \"success\"\n                });\n                preventHistory = JSON.parse(window.sessionStorage.preventHistory);\n\n                if (preventHistory) {\n                  this.$router.push({\n                    path: preventHistory.name,\n                    query: preventHistory.query\n                  });\n                }\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getUser(_x) {\n        return _getUser.apply(this, arguments);\n      }\n\n      return getUser;\n    }()\n  }, {\n    key: \"handleLogout\",\n    value: function handleLogout() {\n      window.sessionStorage.userInfo = \"\";\n      this.$store.commit(\"SAVE_USER\", {\n        userInfo: {\n          _id: \"\",\n          name: \"\",\n          avatar: \"\"\n        }\n      });\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(value) {\n      this.handleFlag = value;\n      this.visible = true;\n    }\n  }, {\n    key: \"handleCancel\",\n    value: function handleCancel(value) {\n      this.visible = value;\n    }\n  }, {\n    key: \"handleOk\",\n    value: function handleOk(value) {\n      this.visible = value;\n    }\n  }, {\n    key: \"handleSelect\",\n    value: function handleSelect(val, oldVal) {\n      // console.log(\"val :\", val);\n      // console.log(\"oldVal :\", oldVal);\n      this.activeIndex = val;\n    }\n  }, {\n    key: \"userInfo\",\n    get: function get() {\n      var userInfo = {\n        _id: \"\",\n        name: \"\",\n        avatar: \"\"\n      };\n\n      if (window.sessionStorage.userInfo) {\n        userInfo = JSON.parse(window.sessionStorage.userInfo);\n        this.$store.commit(\"SAVE_USER\", {\n          userInfo: userInfo\n        });\n      }\n\n      if (this.$store.state.user.userInfo) {\n        userInfo = this.$store.state.user.userInfo;\n      }\n\n      return userInfo;\n    }\n  }]);\n\n  return Nav;\n}(Vue);\n\ntslib_1.__decorate([Watch(\"$route\")], Nav.prototype, \"routeChange\", null);\n\nNav = tslib_1.__decorate([Component({\n  components: {\n    RegisterAndLogin: RegisterAndLogin\n  }\n})], Nav);\nexport default Nav;",null]}